<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Constructor Tour 360¬∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1A1A1A 0%, #2C2C2C 100%);
            color: #FFFFFF;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .test-container {
            background: #2C2C2C;
            border: 3px solid #FAB334;
            border-radius: 15px;
            padding: 40px;
            max-width: 600px;
            text-align: center;
            box-shadow: 0 8px 30px rgba(250, 179, 52, 0.3);
        }

        h1 {
            color: #FAB334;
            font-size: 28px;
            margin-bottom: 20px;
        }

        .status {
            background: #1A1A1A;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .status-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #FAB334;
        }

        .status-item:last-child {
            border-bottom: none;
        }

        .status-label {
            font-weight: bold;
            color: #E0E0E0;
        }

        .status-value {
            color: #FAB334;
        }

        button {
            background: linear-gradient(135deg, #FAB334 0%, #F39C12 100%);
            color: #1A1A1A;
            border: none;
            padding: 15px 40px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
            transition: transform 0.2s;
        }

        button:hover {
            transform: scale(1.05);
        }

        button:active {
            transform: scale(0.98);
        }

        #log {
            background: #000000;
            color: #00FF00;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            padding: 15px;
            border-radius: 8px;
            max-height: 300px;
            overflow-y: auto;
            text-align: left;
            margin-top: 20px;
        }

        .log-entry {
            margin: 5px 0;
        }

        .success {
            color: #00FF00;
        }

        .error {
            color: #FF0000;
        }

        .info {
            color: #00BFFF;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Test WebView - Constructor Tour 360¬∞</h1>
        
        <div class="status">
            <div class="status-item">
                <span class="status-label">Estado WebView:</span>
                <span class="status-value" id="webview-status">‚úÖ CARGADO</span>
            </div>
            <div class="status-item">
                <span class="status-label">JavaScript:</span>
                <span class="status-value" id="js-status">‚úÖ HABILITADO</span>
            </div>
            <div class="status-item">
                <span class="status-label">FlutterChannel:</span>
                <span class="status-value" id="flutter-status">‚è≥ Verificando...</span>
            </div>
            <div class="status-item">
                <span class="status-label">Propiedad ID:</span>
                <span class="status-value" id="property-id">‚è≥ Esperando...</span>
            </div>
        </div>

        <button onclick="testFlutterChannel()">üì§ Probar Env√≠o a Flutter</button>
        <button onclick="testAlert()">üîî Probar Alert</button>
        <button onclick="clearLog()">üóëÔ∏è Limpiar Log</button>

        <div id="log"></div>
    </div>

    <script>
        // Log function
        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            const timestamp = new Date().toLocaleTimeString();
            entry.textContent = `[${timestamp}] ${message}`;
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(message);
        }

        function clearLog() {
            document.getElementById('log').innerHTML = '';
            log('‚úÖ Log limpiado', 'success');
        }

        // Test FlutterChannel
        function testFlutterChannel() {
            log('üß™ Probando FlutterChannel...', 'info');
            
            if (window.FlutterChannel) {
                log('‚úÖ FlutterChannel disponible', 'success');
                
                const testData = {
                    type: 'test',
                    message: 'Mensaje de prueba desde WebView',
                    timestamp: Date.now()
                };
                
                try {
                    window.FlutterChannel.postMessage(JSON.stringify(testData));
                    log('‚úÖ Mensaje enviado a Flutter', 'success');
                } catch (error) {
                    log(`‚ùå Error enviando mensaje: ${error}`, 'error');
                }
            } else {
                log('‚ùå FlutterChannel NO disponible', 'error');
                document.getElementById('flutter-status').textContent = '‚ùå NO DISPONIBLE';
                document.getElementById('flutter-status').style.color = '#FF0000';
            }
        }

        function testAlert() {
            alert('‚úÖ Alerta de JavaScript funcionando correctamente');
            log('‚úÖ Alert ejecutado', 'success');
        }

        // Check FlutterChannel availability
        window.addEventListener('DOMContentLoaded', function() {
            log('‚úÖ DOM Content Loaded', 'success');
            log('üîç Verificando FlutterChannel...', 'info');
            
            setTimeout(function() {
                if (window.FlutterChannel) {
                    log('‚úÖ FlutterChannel detectado', 'success');
                    document.getElementById('flutter-status').textContent = '‚úÖ DISPONIBLE';
                } else {
                    log('‚ùå FlutterChannel NO detectado', 'error');
                    document.getElementById('flutter-status').textContent = '‚ùå NO DISPONIBLE';
                    document.getElementById('flutter-status').style.color = '#FF0000';
                }
            }, 100);
        });

        // Listen for property info from Flutter
        window.addEventListener('message', function(event) {
            log(`üì® Mensaje recibido: ${JSON.stringify(event.data)}`, 'info');
            
            if (event.data.type === 'propertyInfo') {
                log('‚úÖ Informaci√≥n de propiedad recibida', 'success');
                document.getElementById('property-id').textContent = event.data.propertyId;
                log(`   - Property ID: ${event.data.propertyId}`, 'info');
                log(`   - Address: ${event.data.propertyAddress}`, 'info');
                log(`   - Type: ${event.data.propertyType}`, 'info');
            }
        });

        log('üöÄ WebView Test HTML inicializado', 'success');
    </script>
</body>
</html>
